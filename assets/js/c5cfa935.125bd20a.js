"use strict";(self.webpackChunkdesmos_docs=self.webpackChunkdesmos_docs||[]).push([[7386],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>b});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=c(n),b=a,m=u["".concat(l,".").concat(b)]||u[b]||p[b]||o;return n?r.createElement(m,s(s({ref:t},d),{},{components:n})):r.createElement(m,s({ref:t},d))}));function b(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,s=new Array(o);s[0]=u;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:a,s[1]=i;for(var c=2;c<o;c++)s[c]=n[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},90062:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var r=n(87462),a=(n(67294),n(3905));const o={id:"observe-data",title:"Observing data",sidebar_label:"Observing data",slug:"observe-data"},s="Observing new data",i={unversionedId:"developers/observe-data",id:"developers/observe-data",title:"Observing data",description:"Introduction",source:"@site/docs/02-developers/05-observe-data.md",sourceDirName:"02-developers",slug:"/developers/observe-data",permalink:"/next/developers/observe-data",draft:!1,editUrl:"https://github.com/desmos-labs/docs/master/docs/02-developers/05-observe-data.md",tags:[],version:"current",lastUpdatedAt:1660120715,formattedLastUpdatedAt:"Aug 10, 2022",sidebarPosition:5,frontMatter:{id:"observe-data",title:"Observing data",sidebar_label:"Observing data",slug:"observe-data"},sidebar:"docs",previous:{title:"Query data",permalink:"/next/developers/query-data"},next:{title:"F.A.Q",permalink:"/next/developers/faq"}},l={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Websocket",id:"websocket",level:2},{value:"Events",id:"events",level:3},{value:"Example",id:"example",level:4}],d={toc:c};function p(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"observing-new-data"},"Observing new data"),(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"Aside from querying data, you can also observe new data as its inserted inside the chain itself. In this way, you will be notified as soon as a transaction is properly executed without having to constantly polling the chain state by yourself. "),(0,a.kt)("h2",{id:"websocket"},"Websocket"),(0,a.kt)("p",null,"All the live data observation is done though the usage of a ",(0,a.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/WebSocket"},"websocket"),". The endpoint of such websocket is the following: "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"ws://lcd-endpoint/websocket\n\n# Example\n# ws://morpheus.desmos.network/websocket\n")),(0,a.kt)("h3",{id:"events"},"Events"),(0,a.kt)("p",null,"In order to subscribe to specific events, you will need to send one or more messages to the websocket once you opened a connection to it. Such messages need to contain the following JSON object and must be string encoded: "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "method": "subscribe",\n  "id": "0",\n  "params": {\n    "query": "tm.event=\'eventCategory\' AND eventType.eventAttribute=\'attributeValue\'"\n  }\n}\n')),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"query")," field can have the following values: "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"tm.event='NewBlock'")," if you want to observe each new block that is created (even empty ones);"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"tm.event='Tx'")," if you want to subscribe to all new transactions;"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"message.action='<action>'")," if you want to subscribe to events emitted when a specific message is sent to the chain.\nIn this case, please refer to the ",(0,a.kt)("inlineCode",{parentName:"li"},"Message action")," section on each transaction message\nspecification page to know what is the type associated to each message.")),(0,a.kt)("p",null,"Please note that if you want to subscribe to multiple events you will need to send multiple query messages upon connecting to the websocket. "),(0,a.kt)("h4",{id:"example"},"Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "method": "subscribe",\n  "id": "0",\n  "params": {\n    "query": "message.action=\'save_profile\'"\n  }\n}\n')))}p.isMDXComponent=!0}}]);